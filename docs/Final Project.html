<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Portfolio - Final Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Myself.html" rel="" target="">
 <span class="menu-text">Myself</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Certifications.html" rel="" target="">
 <span class="menu-text">Certifications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Internships.html" rel="" target="">
 <span class="menu-text">Interships</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Mid Project Codes.html" rel="" target="">
 <span class="menu-text">Mid Project Codes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Mid Project Representations.html" rel="" target="">
 <span class="menu-text">Mid Project Representations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./Final Project.html" rel="" target="" aria-current="page">
 <span class="menu-text">Final Project</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<div class="quarto-about-trestles column-page">
  <div class="about-entity">
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final Project</h1>
</div>
<div class="quarto-title-meta">
  </div>
</header>
  </div>
  <div class="about-contents"><main class="content column-page" id="quarto-document-content">
<section id="research-question---1" class="level1">
<h1><u><strong>“ RESEARCH QUESTION - 1 ”</strong></u></h1>
<p><u><strong>DATA DESCRIPTION</strong></u></p>
<p>The dataset utilized in this analysis originates from the publicly accessible government database, Data.gov, which provides a wealth of datasets for public use across various fields, which features datasets in various formats including CSV, specifically designed for open-access research and analysis. The dataset titled “Sleep Health and Lifestyle Dataset” consists of data collected to explore the various factors affecting individuals’ Sleep Patterns, Physical Activity Levels, Additional Health, and Lifestyle Factors Lifestyle Dataset, and Overall Sleep Health. It comprises 374 entries across 13 distinct variables, including demographic information (e.g., age, gender), lifestyle characteristics (e.g., physical activity level, occupation), and health-related metrics (e.g., sleep quality, BMI category, heart rate, blood pressure).</p>
<p><u><strong>RESEARCH QUESTION</strong></u></p>
<p><strong>Research question - How does physical activity level influence sleep quality across different age groups? (Lasso Model)</strong></p>
<p><strong>Interpretation</strong>: - This question examines the interaction between physical activity and age, and their collective impact on sleep quality. By using a lasso regression model, we can analyze how these variables interact and possibly uncover insights into lifestyle factors that affect sleep. This question probes the dynamics between physical activity and sleep quality, taking into account the age variable as a potential moderator in this relationship. By exploring these interactions, the study aims to identify how lifestyle factors like physical activity influence sleep quality and if this influence varies significantly across different age demographics. This analysis employs a Lasso regression model to examine the dataset, allowing for an understanding of the impact of these variables both individually and interactively.</p>
<p><u><strong>STATISTICAL MODEL AND METHODOLOGY</strong></u></p>
<p>To address the research question of how physical activity levels influence sleep quality across different age groups, a Lasso regression model (Least Absolute Shrinkage and Selection Operator) is employed. This method is particularly suitable for datasets with potential multicollinearity among predictors and where feature selection is critical. The Lasso model is a type of linear regression that introduces a regularization penalty parameter \ (\lambda\), which controls the complexity of the model. This penalty helps to prevent overfitting by shrinking some of the regression coefficients to zero, effectively selecting a simpler model that avoids the inclusion of less important predictors.</p>
<p><strong>Response Variable:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Quality of Sleep</strong>: This is treated as a continuous variable representing the sleep quality on a numerical scale. This variable reflects the self-reported sleep quality of individuals within the dataset.</p>
<p><strong>Predictors:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Age:</strong> Treated as a continuous variable, hypothesized to interact with physical activity levels in influencing sleep quality.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Physical Activity Level</strong>: Also treated as a continuous variable, representing the intensity or frequency of physical activity.</p>
<p><strong>Interaction Term:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Age &amp; Physical Activity Level</strong>: This interaction term allows the model to assess whether the influence of physical activity on sleep quality varies by age.</p>
<p><strong>Model Configuration:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The predictors, including the interaction term, are included in the model matrix with standard scaling applied to facilitate regularization. The primary predictors include “Age” and “Physical Activity Level,” both treated as continuous variables. We also consider the interaction between these two predictors, as it may provide insights into how the effect of physical activity on sleep quality varies across different ages.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The selection of the optimal \ (\lambda \) value is achieved through cross-validation, specifically using the `cv.glmnet` function in the R programming environment. This approach ensures that the lambda value chosen minimizes the prediction error, thus enhancing the model’s predictive accuracy and generalizability.</p>
<p>This method involves dividing the data into subsets, using each in turn for testing the model fitted on the remaining data. The lambda that minimizes the cross-validation error is selected, balancing the trade-off between bias and variance.</p>
<p><strong>Data Transformation:</strong></p>
<p>- Before analysis, continuous variables such as age and physical activity level may be centered or standardized to improve the numerical stability of the model fitting process and the interpretability of the resulting coefficients.</p>
<p><strong>Scaling:</strong> Given the differing scales of the predictors (e.g., age vs.&nbsp;physical activity level), standardizing these variables may be necessary to ensure that the regularization penalty is applied uniformly.</p>
<p><strong>Interaction Term:</strong> The model includes an interaction term between age and physical activity level to investigate whether the relationship between physical activity and sleep quality changes with age.</p>
<p>This methodology provides a robust framework for examining the direct and interactive effects of age and physical activity on sleep quality, offering insights into potential age-specific recommendations for physical activity to enhance sleep health.</p>
<p><u><strong>ANALYSIS</strong></u></p>
<p><strong>Visualization of the Lasso Graphs:</strong></p>
<p><img src="images/clipboard-381336934.png" class="img-fluid"></p>
<p><img src="images/clipboard-3181319717.png" class="img-fluid"></p>
<p><strong>Explanation For the Lasso Graph:</strong></p>
<p><strong>Coefficient Path Plot</strong>: As the regularization parameter (lambda) rises, the coefficients of the predictors in the Lasso model decrease. Effectively balancing bias and variance, the red line indicates the lambda value that minimizes the cross-validation error.</p>
<p><strong>Cross-Validation Plot</strong>: This shows the average squared error for several values of lambda to identify the ideal lambda for the model.</p>
<p>A tile plot is used in the final visualization to show how anticipated sleep quality varies with age and degree of physical activity. The color gradient shows the quality of sleep, with different hues denoting various projected sleep quality levels. This graphic illustration aids in the comprehension of the intricate relationships between aging and physical exercise and how they affect the quality of sleep.</p>
<p><strong>Shrinkage and Sparsity</strong>: As the lambda grows, Lasso Regression sets certain coefficients to exactly zero, introducing sparsity into the model. This Lasso behavior is highly helpful for feature selection, especially in situations when there may be a lot of predictors in the dataset.</p>
<p>The graph you have illustrates how, when lambda is near 0 (far left of the plot), coefficients start at their fullest (least penalized) values and fall towards zero as lambda increases.</p>
<p><strong>Coefficient Trajectories:</strong> As the regularization strength is changed, each line shows the trajectory of the coefficient for a specific predictor. Interestingly, some coefficients may remain non-zero throughout a larger range of lambda values, while others may rapidly decay to zero as lambda grows.</p>
<p>Rapidly shrinking to zero coefficients are probably less significant to the model, suggesting that they are either redundant with other features in the model or have less correlation with the target variable.</p>
<p><strong>Optimal Lambda (Red Vertical Line):</strong></p>
<p>The lambda value that has been selected as optimal, usually determined through cross-validation, is represented by the red vertical line (cv. glmnet in your code). The cross-validation error is minimized by this lambda, which strikes a fair balance between model complexity and efficiency.</p>
<p>This line’s positioning indicates the threshold beyond which further penalty increases result in worse cross-validation error generalization. The model can keep only the most important predictors and eliminate those that could cause overfitting thanks to the lambda that was selected.</p>
<p><strong>(Intercept) -2.336480711</strong>: This number shows the response variable’s baseline value when none of the predictor variables is zero. It is the regression line’s intercept.</p>
<p>The response variable’s baseline value is predicted by the model to be lower when all predictors are held at zero, as indicated by the negative intercept.</p>
<p><strong>Age 0.216280398:</strong> If all other variables are maintained constant, this coefficient shows that there is an increase in the response variable of roughly 0.216 for every unit increase in age.</p>
<p>Age and the response variable may have a positive association, based on this positive value.</p>
<p><strong>Physical.Activity.Level 0.120627719:</strong> Similar to age, this coefficient indicates that, when all other variables are held constant, an increase in the physical activity level of one unit is related to an increase in the response variable of roughly 0.121.</p>
<p>A positive coefficient suggests that increased levels of physical activity have a positive effect on the response variable.</p>
<p><strong>Age: Physical.Activity.Level:</strong> The interaction term between age and physical activity level is -0.002615155. It shows that for every unit increase in both age and physical activity level, the combined effect of age and physical activity on the response variable drops by around 0.0026.</p>
<p>When these two predictors have a negative interaction term, it usually means that their combined influence is smaller than the sum of their individual effects. In real words, this could imply that as age and physical activity grow together, the beneficial effects they have on the response variable are marginally lessened.</p>
<p><strong>Predicted Sleep Quality Across Age and Physical Activity Levels - Visualization:</strong></p>
<p><img src="images/clipboard-2189666198.png" class="img-fluid"></p>
<p><strong>Color Gradient Representation</strong>: The projected sleep quality is represented by a color scale ranging from purple to red, where purple denotes lower sleep quality (value of 6) and red denotes higher sleep quality (value of 9).</p>
<p>The color’s intensity and the anticipated quality of sleep are intimately correlated. Deeper purple denotes lower quality, whereas more vivid red denotes higher quality.</p>
<p>On the horizontal axis, age influence:</p>
<p>Age is represented by the X-axis, which runs from 30 to 60 years.</p>
<p>The hue changes from purple to red as age grows from left to right. Based on model assumptions, this implies that the expected sleep quality generally increases with age.</p>
<p><strong>Physical Activity Level (Y-Axis):</strong> The Y-axis displays the range of physical activity levels, from 40 to 80.</p>
<p>The lack of a visible vertical gradient in the colors suggests that, under the parameters of this model, age is a stronger predictor of sleep quality than physical activity level. Further evidence that age is a more significant predictor in this model comes from the color’s consistency across physical activity levels at each distinct age group.</p>
<p><strong>Interactions Between Age and Physical Activity:</strong></p>
<p>The visualization also allows us to observe the interaction effects—if any—between age and physical activity level. The mostly uniform vertical color progression (not changing much with increasing physical activity level) indicates that the main varying factor impacting sleep quality in this model is age, rather than physical activity.</p>
<p><u><strong>CONCLUSION</strong></u></p>
<p>Our analysis using the Lasso regression model provided valuable insights into how physical activity level influences sleep quality across different age groups. The results suggest that physical activity positively impacts sleep quality, and this effect varies with age. Specifically, the positive impact of physical activity on sleep quality appears to diminish slightly as age increases, as indicated by the interaction term between age and physical activity level.</p>
<p><strong>Impact of Physical Activity</strong>: Increased physical activity levels were generally associated with improved sleep quality across all age groups. However, the strength of this relationship varied by age.</p>
<p><strong>Age as a Modifying Factor</strong>: The interaction between age and physical activity levels indicated that the benefit of physical activity on sleep quality tends to decrease slightly with age. This suggests that while physical activity remains beneficial for older adults, the extent of its impact may not be as pronounced as in younger individuals.</p>
<p><strong>Significance of Model Predictors</strong>: The Lasso regression effectively identified the most significant predictors of sleep quality. The model highlighted that age and physical activity are crucial factors, but their interaction also plays a significant role.</p>
<p><u><strong>IMPLICATIONS</strong></u></p>
<p>These findings underscore the importance of tailored health recommendations that consider both age and lifestyle factors such as physical activity. For younger individuals, increasing physical activity levels could be a more effective strategy in improving sleep quality compared to older age groups, where the benefits might be less pronounced. This information can be crucial for healthcare providers, fitness professionals, and policymakers in designing targeted interventions to enhance sleep health.</p>
<p><u><strong>FUTURE RESEARCH AND DIRECTIONS</strong></u></p>
<p><strong>Longitudinal Studies:</strong> To validate and expand upon these findings, longitudinal research could be conducted to observe changes over time, helping to ascertain causality and the long-term effects of physical activity on sleep quality across age groups.</p>
<p><strong>Expanded Variable Set:</strong> Future studies could include additional variables such as diet, mental health status, and environmental factors, which might also influence sleep quality and interact with physical activity and age.</p>
<p><strong>Diverse Populations:</strong> Extending the research to include diverse populations from different geographic and socio-economic backgrounds could help generalize the findings and tailor recommendations based on broader characteristics.</p>
<p><u><strong>FURTHER ANALYSIS</strong></u></p>
<p><strong>Machine Learning Models</strong>: Employing machine learning techniques such as random forests or support vector machines could provide more nuanced insights into the complex relationships between variables.</p>
<p><strong>Subgroup Analysis</strong>: Detailed analysis focusing on specific subgroups (e.g., based on BMI categories or stress levels) might reveal more specific trends and causal pathways.</p>
<p><strong>Interaction Effects</strong>: More complex models that explore multiple interaction terms between variables could unearth additional layers of influence among the predictors of sleep quality.</p>
<p><u><strong>“ RESEARCH QUESTION - 2 ”</strong></u></p>
<p><u><strong>RESEARCH QUESTION</strong></u></p>
<p><strong>Research question</strong> - <strong>“What are the key predictors influencing sleep quality, and how can we predict sleep quality based on lifestyle and health metrics?”</strong></p>
<p><strong>Interpretation:</strong> - This question aims to identify significant lifestyle and health determinants that impact sleep quality from the dataset, exploring how variables such as physical activity, stress levels, age, heart rate, and blood pressure interplay to affect sleep. The regression model used in this analysis is a Random Forest regression. This type of model is particularly suited for this kind of analysis due to its ability to handle large datasets with multiple input variables and its robustness against overfitting, especially important when dealing with a wide range of potentially correlated predictors. By leveraging a Random Forest regression model, this study seeks to understand and quantify the complex interactions among these variables, to uncover complex interactions between these variables, thereby predicting sleep quality more accurately, with the ultimate goal of predicting sleep quality in a diverse population, the Random Forest allows us to estimate how each variable contributes to sleep quality, and to what extent. This approach not only aims to determine the influential predictors but also to understand the extent to which these predictors explain the variation in sleep quality across the population. It helps in developing targeted interventions and recommendations to enhance sleep quality based on individual lifestyle and health profiles. The analysis will help uncover the most impactful predictors and provide insights into how various factors like physical activity, stress levels, heart rate, and others collectively influence sleep quality. The objective is not only to model these relationships but also to offer actionable insights that could assist individuals and health practitioners in enhancing sleep hygiene and overall well-being based on personalized lifestyle data. Regression is the type of random forest used.</p>
<p><u><strong>STATISTICAL MODEL AND METHODOLOGY</strong></u></p>
<p>To answer the research question regarding the key predictors of sleep quality and how these can be used to predict sleep quality based on lifestyle and health metrics, we have chosen to utilize a Random Forest regression model. This choice is predicated on the model’s ability to handle large datasets with multiple input variables and its robustness against overfitting, making it ideal for exploring complex interactions between variables.</p>
<p><strong>Model Choice:</strong> For this analysis, a Random Forest regression model has been selected to predict sleep quality based on a range of lifestyle and health metrics.</p>
<p>This shows that the random forest model is applied to a regression job, which implies that instead of class labels (which would be indicated by “classification”), the model predicts continuous outcomes.</p>
<p>There are 500 trees. There are 500 distinct decision trees in the model. The average of these individual trees’ projections is used in random forest regression to make predictions. By lowering variance and preventing overfitting, the many trees strengthen the model’s robustness.</p>
<p><strong>Model Description:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Response Variable:</strong> The response variable in this model is ‘Sleep Quality’, which is a continuous variable derived from the dataset. This variable reflects the overall quality of sleep, rated on a scale, which participants report based on their sleep patterns.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Predictors</strong>: The potential predictors include:</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Age:</strong> A continuous variable reflecting the age of the participants.</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Physical Activity Level</strong>: A continuous variable that quantifies the daily physical activity.</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Stress Level</strong>: A continuous variable representing the self-reported stress.</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Heart Rate</strong>: A continuous variable representing the average daily heart rate.</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Blood Pressure</strong>: A categorical variable transformed into numerical scores representing systolic and diastolic blood pressure.</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Additional metrics</strong> such as BMI category and daily steps could also be considered based on preliminary analyses.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Variable Transformations</strong>: For categorical variables like Blood Pressure, a numerical transformation is applied to use these variables effectively in the model. This involves converting blood pressure readings into a numerical score that reflects the relative health risk associated with different pressure levels.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Model Construction:</strong></p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The Random Forest model will be constructed using 500 decision trees (‘ntrees=500’), enhancing the model’s accuracy and stability.</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At each split in the decision trees, only one variable (‘mtry=1’) will be considered to increase the diversity of the trees and hence the robustness of the model.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>RF MODEL Analysis Graph:</strong></p>
<p><img src="images/clipboard-2453973739.png" class="img-fluid"></p>
<p><strong>Interpretation:</strong></p>
<p><strong>1. %IncMSE:</strong></p>
<p>The first graph shows the percentage increase in Mean Squared Error (%IncMSE) for each variable. This measure assesses the importance of each variable by determining how much the model’s prediction error increases when the data for that variable is permuted while all others are left unchanged. Higher values indicate greater importance because more error is introduced when that predictor’s information is obscured:</p>
<p>Stress Level and Age have the highest impact on the model’s accuracy, indicating they are crucial predictors of sleep quality. The larger increase in MSE when these predictors are shuffled signifies their strong influence.</p>
<p>Physical Activity Level and Systolic BP show moderate importance.</p>
<p>Diastolic BP and Heart Rate appear to be less important relative to other variables in predicting sleep quality.</p>
<p><strong>2. IncNodePurity:</strong></p>
<p>The second graph shows the increase in node purity, another measure of variable importance. It is calculated by summing the decreases in node impurity (e.g., variance for regression tasks) that result from splits on a particular variable, aggregated over all trees in the forest:</p>
<p>Stress Level again shows the highest importance based on this measure, reinforcing its role as a critical factor in predicting sleep quality.</p>
<p>Heart Rate and Age also contribute significantly to node purity, indicating their roles in making effective splits that help clarify the model’s decisions.</p>
<p>Physical Activity Level, Diastolic BP, and Systolic BP, in decreasing order, also contribute to model accuracy but to a lesser extent than the other variables.</p>
<p><strong>Summary</strong></p>
<p>Both graphs confirm that Stress Level, Age, and Heart Rate are key predictors of sleep quality, with Stress Level consistently appearing as the most important variable across both measures. The physical factors, while important, do not influence the model as much as psychological stress and age. This insight could be vital for targeted interventions or further studies focusing on managing stress and monitoring age-related factors to improve sleep quality.</p>
<p><strong>Methodology:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Training the Model:</strong> The dataset will be split into training and testing subsets, with the majority of the data used for training the model. This division allows for the evaluation of the model on unseen data, ensuring the predictions are generalizable.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Model Evaluation:</strong> The model’s performance will be assessed using the Mean of Squared Residuals and the percentage of variance explained by the model. These metrics will provide insights into how well the model fits the data and how much of the variability in sleep quality it can explain.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Variable Importance Assessment:</strong> After fitting the model, an analysis of the importance of each predictor will be conducted. This will highlight which variables are most influential in predicting sleep quality, thereby providing insights into targeted interventions for improving sleep.</p>
<p><u><strong>ANALYSIS</strong></u></p>
<p><strong>Model Summary:</strong></p>
<p><img src="images/clipboard-3696388222.png" class="img-fluid"></p>
<p><strong>Model Call</strong>: This line displays the model-fitting formula. Quality. of sleep&nbsp;is anticipated by the&nbsp;model. Age and physical activity about sleep.Systolic, Heart Rate, Stress Level, and Level.BP as well as diastolic.ABP.</p>
<p>The model is set up to calculate the relevance of each predictor, and data1 is the data used. The value 500 shows that the model used 500 trees in the forest.</p>
<p>Regression forest is the type of random forest that is indicated. This kind of modeling is used to forecast continuous outcomes, such as the quality of sleep in this instance (probably on a continuous scale).</p>
<p><strong>Number of Trees:</strong></p>
<p>There are five hundred trees in the forest. While more trees may increase computing costs, they can also boost the accuracy of the model.</p>
<p><strong>Number of Variables Tried at Each Split</strong>: This indicates that when creating a tree, two variables are chosen at random at each split point. This parameter, which is commonly referred to as mtry in Random Forest terminology, aids in selecting the number of characteristics that will be taken into account for splitting at each tree node.</p>
<p><strong>Mean of Squared Residual:</strong> 0.02697864 is the squared residual mean. The average of the squares of the variations between the actual and anticipated values (residuals) is represented by this value. A lower score denotes better model performance since it shows that the model’s predictions are more in line with the actual data.</p>
<p><strong>% Var Clarified:</strong></p>
<p>98.11% of the variance in the dependent variable (sleep quality) can be explained by the model. This is a measure of how well the data fit the model. An excellent fit is indicated by a number near 100%, which indicates that the model can correctly predict the quality of sleep based on the provided predictors.</p>
<p>With a very high percentage of variation explained and low mean squared residuals, the&nbsp;model looks to be performing incredibly well overall, indicating an excellent fit for the data</p>
<p><strong>Model Efficacy</strong> - Considering the features that were chosen, the random forest regression model does a great job of describing and forecasting the quality of sleep. The model leaves very little unexplained for, accounting for 98.11% of the variation, suggesting that it may have extremely good predictive power.</p>
<p><strong>For the graph -</strong></p>
<p>For each observation in your dataset, the graph you gave shows a scatter plot comparing the actual sleep quality (on the x-axis) with the predicted sleep quality (on the y-axis). The graphic now includes a red line, which shows the fit of linear regression.</p>
<p><strong>Actual vs Predicted Sleep Quality – Visualization:</strong></p>
<p><img src="images/clipboard-1050132825.png" class="img-fluid"></p>
<p><strong>Black dots, or data points:</strong></p>
<p>Plotting the actual sleep quality against the model’s prediction for a single observation, each dot in your dataset represents a single observation.</p>
<p>The way these points are positioned about the red diagonal line aids in determining how accurate the predictions are.</p>
<p><strong>Regression Line</strong> -The regression line, often known as the red line, depicts the ideal relationship in which the actual and projected values exactly match. All points would fall precisely on this line, where expected and actual values are equal if the model were perfect.</p>
<p><strong>Observation Clustering:</strong></p>
<p>For the majority of observations, the anticipated and actual sleep quality nearly match, as seen by the majority of the dots lying extremely close to the red line.</p>
<p>The model’s consistency in predicting various degrees of sleep quality is demonstrated by the same pattern of points seen over the whole range of sleep quality values, from 4 to 9.</p>
<p><strong>Deviation from the Line:</strong></p>
<p>&nbsp;A few points deviate significantly from the red line, especially in the mid-range (between actual values of 6 and 7). However, the majority of the points are clustered near the red line. The model may have overestimated or underestimated the actual quality of sleep, as seen by these small differences in prediction.</p>
<p><strong>Good Fit Areas:</strong></p>
<p>The model appears to be more accurate in predicting values in the mid-ranges of sleep quality, specifically between 5 and 7 when points cluster close to the red line.</p>
<p><strong>Possible Outliers or Variance:</strong></p>
<p>Points that show a large departure from the red line may be indicative of locations in the data where the model performs poorly or of outliers. For instance, the model appears to somewhat underestimate sleep quality at higher actual sleep quality values (8 and 9).</p>
<p><strong>Practical Implications:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Validation of the Model</strong>: The plot effectively validates the regression model by demonstrating its high degree of accuracy in predicting sleep quality. Applications in health monitoring where it’s necessary to forecast sleep quality based on many inputs can benefit from this.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Finding Outliers</strong>: If there are any notable departures from the regression line, additional research can be done to determine why the initial predictions were off. This could reveal patterns in the data or point out places where the model needs to be improved.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Confidence in Deployment</strong>: Considering the robust performance illustrated in the story, there would be confidence in implementing this model in a production setting or utilizing it as a foundation for more research on the effects of sleep quality.</p>
<p><u><strong>CONCLUSION</strong></u></p>
<p><strong>Conclusions and Implications:</strong></p>
<p>The analysis using the Random Forest regression model has provided significant insights into the factors influencing sleep quality based on the dataset of lifestyle and health metrics. The model proved to be highly effective, explaining a substantial portion of the variance in sleep quality across different individuals.</p>
<p><strong>Key Findings:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Influential Predictors:</strong> The most influential predictors identified include physical activity level, stress level, and age. These factors were consistently important across the model’s predictions, suggesting that interventions aimed at managing stress and promoting physical activity could be particularly beneficial in improving sleep quality.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Model Performance:</strong> The model demonstrated excellent predictive accuracy, with a high percentage of variance explained and low mean squared residuals. This indicates a strong fit to the data and suggests that the Random Forest approach was well-suited to capturing the complex interactions between the predictors.</p>
<p><u><strong>IMPLICATIONS</strong></u></p>
<p><strong>Health Interventions</strong>: The findings can be used to tailor health interventions more precisely, focusing on the most impactful factors to improve sleep quality. For instance, programs designed to reduce stress or increase physical activity could be prioritized.</p>
<p><strong>Policy Making:</strong> The results can inform policymakers in health or workplace environments where managing employee or public health is a concern, helping to craft policies that promote better sleep hygiene.</p>
<p><u><strong>FUTURE QUESTIONS AND FURTHER ANALYSIS</strong></u></p>
<p>While the current analysis has yielded valuable insights, several questions remain that could be addressed in future research:</p>
<p>1. <strong>Additional Predictors:</strong> Would including other lifestyle factors such as diet, alcohol consumption, or screen time before bed enhance the predictive power of the model?</p>
<p>2. <strong>Longitudinal Analysis:</strong> How do changes in lifestyle or health metrics over time affect sleep quality? A longitudinal study design could provide deeper insights into the temporal dynamics of these relationships.</p>
<p>3. <strong>Intervention Studies:</strong> What are the effects of specific interventions targeted at the identified key predictors of sleep quality? Experimental studies could be conducted to evaluate the efficacy of various intervention strategies.</p>
<p>4. <strong>Demographic Variability:</strong> How do these factors play out differently across various demographic groups such as different age groups, genders, or cultural backgrounds?</p>
<p><strong>Conclusion:</strong></p>
<p>The use of a Random Forest regression model has significantly advanced our understanding of what affects sleep quality and how these effects can be modeled. Moving forward, these insights not only pave the way for targeted health interventions but also open up several avenues for further research, ensuring continuous improvement in our approach to managing and enhancing sleep quality. The successful application of the Random Forest regression model in this context highlights the potential of machine learning in public health. By leveraging such models, stakeholders can gain actionable insights into health behaviors and outcomes, leading to better-informed decisions and strategies aimed at improving sleep quality across populations. Future research should continue to build on these findings, exploring new variables and methods to further enhance the understanding and management of sleep quality.</p>
<p><u><strong>“ RESEARCH QUESTION - 2 ”</strong></u></p>
<p><u><strong>RESEARCH QUESTION</strong></u></p>
<p><strong>Research question</strong> - <strong>Does BMI predict the presence of sleep apnea?</strong></p>
<p><strong>Interpretation</strong>: - This question seeks to understand whether BMI can be used as a predictive tool for diagnosing sleep apnea, aiding in early identification and potential preventive measures for at-risk individuals. Logistic Regression is employed here due to its efficiency in handling binary outcome variables—such as the presence or absence of sleep apnea—which are coded as 1 and 0, respectively. This model is particularly useful in the medical field for the following reasons: It calculates the odds and probabilities of occurrence, making it excellent for risk assessment and prediction. Logistic regression results are easy to interpret, providing clear insights into how predictor variables like BMI influence the likelihood of an outcome. It can easily incorporate different types of predictors (continuous, categorical) and allows for adjustments based on other covariates (e.g., age, gender), making it adaptable to complex medical datasets. This approach leverages logistic regression to explore the predictive relationship between BMI and sleep apnea, utilizing a dataset rich in relevant health metrics. The findings could potentially lead to better screening strategies in clinical settings, ultimately contributing to improved management and prevention of sleep apnea.</p>
<p><u><strong>STATISTICAL MODEL AND METHODOLOGY</strong></u></p>
<p>To address the research question of whether Body Mass Index (BMI) predicts the presence of sleep apnea, we will employ a logistic regression model. This model is well-suited for binary classification tasks where the outcome is dichotomous, such as the presence or absence of a condition like sleep apnea.</p>
<p><u><strong>Model Framework:</strong></u></p>
<p><strong>Response Variable</strong>: The dependent variable in this analysis is the presence of sleep apnea, which is a binary variable (0 = No, 1 = Yes).</p>
<p><strong>Primary Predictor:</strong></p>
<p><strong>BMI:</strong> This continuous variable represents the Body Mass Index of individuals. BMI is calculated as the weight in kilograms divided by the square of the height in meters.</p>
<p><strong>Additional Predictors and Transformations:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Age:</strong> Since age is likely to influence sleep apnea risk, it will be included as a continuous predictor.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Gender:</strong> Gender could affect the prevalence of sleep apnea, so it will be included as a categorical predictor (Male, Female).</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Blood Pressure:</strong> Often related to sleep apnea, this might be included as a continuous predictor or transformed into categories (Normal, Elevated, Hypertension stages I and II).</p>
<p>Transformations may be applied to non-linearly related variables to better fit the logistic regression model. For instance, transformations such as logarithmic or polynomial transformations might be considered if preliminary analysis indicates non-linear relationships.</p>
<p><strong>Statistical Techniques:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Model Fitting:</strong> The logistic regression model will be fitted using maximum likelihood estimation to predict the probability of sleep apnea based on BMI and other covariates.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Variable Selection:</strong> Variables will be selected based on their statistical significance and the Akaike Information Criterion (AIC) to ensure that the model remains parsimonious while still capturing the necessary predictors.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Model Validation</strong>: The model’s predictive performance will be assessed using a confusion matrix, and its discriminative ability evaluated through the Receiver Operating Characteristic (ROC) curve and the Area Under the Curve (AUC) metric.</p>
<p><strong>Methodology:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Data Preparation:</strong></p>
<p>o&nbsp;&nbsp; Data will be checked for completeness and accuracy, and missing values will be handled appropriately through imputation or exclusion, depending on their nature and quantity.</p>
<p>o&nbsp;&nbsp; BMI and other continuous predictors may be standardized to have a mean of zero and a standard deviation of one, facilitating model convergence and interpretability.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Data Preprocessing:</strong> Before modeling, the data will be cleaned and preprocessed. Missing values will be handled, and categorical variables will be encoded appropriately.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Model Specification:</strong></p>
<p>o&nbsp;&nbsp; We will employ the glm function in R with the family set to ‘binomial’ to fit the logistic regression model. This approach will allow us to estimate odds ratios for the likelihood of having sleep apnea relative to the predictors.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Model Fitting and Validation:</strong></p>
<p>o&nbsp;&nbsp; The model will be trained on a portion of the data, with the remaining data used for validation. This approach helps in assessing the model’s performance and its generalizability to new data.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Model Training:</strong> The logistic regression model will be trained using a training subset of the data.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Cross-Validation:</strong> To prevent overfitting and to assess the model’s generalizability, k-fold cross-validation will be employed.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Performance Evaluation</strong>: After model training, the performance will be evaluated on a separate test set to verify the model’s accuracy and robustness in predicting new data.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Evaluation Metrics:</strong></p>
<p>o&nbsp;&nbsp; We will evaluate the model’s performance using metrics suitable for binary outcomes, including accuracy, sensitivity, specificity, and the area under the ROC curve (AUC). These metrics will provide a comprehensive view of model performance, particularly its ability to classify individuals correctly as having or not having sleep apnea.</p>
<p><strong>Expected Outputs:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Coefficients of the Model</strong>: These will provide insights into the relationship between each predictor and the probability of sleep apnea, with the coefficients for BMI being of particular interest.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>ROC Curve and AUC</strong>: These will illustrate the model’s discriminative ability, indicating how well it can distinguish between individuals with and without sleep apnea.</p>
<p><u><strong>ANALYSIS</strong></u></p>
<p><strong>Body Mass Index (BMI) predicts the presence of sleep apnea – Visualization:</strong></p>
<p><img src="images/clipboard-2281338536.png" class="img-fluid"></p>
<p><strong>Interpretation:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>ROC Curve and AUC:</strong></p>
<p>o&nbsp;&nbsp; If the ROC curve shows a steep upward trajectory and the AUC is close to 1 (e.g., AUC &gt; 0.8), it suggests that BMI is a strong predictor of sleep apnea. This means that the model based on BMI can effectively differentiate between individuals with and without sleep apnea.</p>
<p>o&nbsp;&nbsp; Conversely, if the ROC curve is close to the diagonal line (AUC ≈ 0.5), it indicates that BMI alone may not be a good predictor of sleep apnea. Other factors beyond BMI might be more influential in predicting sleep apnea.</p>
<p><strong>Key Features of the ROC Curve:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Sensitivity vs.&nbsp;Specificity:</strong> The ROC curve plots sensitivity (true positive rate) on the y-axis against 1-specificity (false positive rate) on the x-axis. Sensitivity measures the proportion of actual positives that are correctly identified (e.g., identifying those with sleep apnea), while specificity measures the proportion of actual negatives that are correctly identified (e.g., identifying those without sleep apnea).</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Curve Shape:</strong> The ROC curve in the image rises steeply towards the upper left corner before reaching a plateau. This steep rise is indicative of a model that achieves high sensitivity without sacrificing much specificity at lower threshold settings. This shape suggests that the model can effectively discriminate between those with and without sleep apnea for a significant range of threshold values.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Area Under the Curve (AUC):</strong> The AUC value is marked as 0.82, which is prominently displayed in the plot. An AUC value of 0.82 suggests good diagnostic ability. The AUC measures the entire two-dimensional area underneath the entire ROC curve and provides a single scalar value to describe the overall performance of the test. An AUC of 1 represents a perfect test, while an AUC of 0.5 represents a worthless test. An AUC of 0.82 indicates that the model has a good level of discriminative ability to distinguish between the classes (presence vs.&nbsp;absence of sleep apnea).</p>
<p><strong>Logistic Regression Coefficients:</strong></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Positive coefficient for BMI:</strong> Indicates that higher BMI values are associated with an increased likelihood of having sleep apnea.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Negative coefficient for BMI:</strong> Indicates that lower BMI values are associated with a decreased likelihood of having sleep apnea.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Non-significant coefficient:</strong> Indicates that BMI may not be a significant predictor of sleep apnea in this model.</p>
<p><strong>Model Performance:</strong> The ROC curve suggests that the logistic regression model performs well in predicting sleep apnea. It indicates that the model is capable of distinguishing between patients with and without sleep apnea with high accuracy across various thresholds.</p>
<p><strong>Clinical Implications:</strong> The good performance of the model (AUC = 0.82) implies it could be a useful tool in clinical settings for screening individuals at risk of sleep apnea. Healthcare providers could use the model’s output to prioritize patients for further diagnostic testing based on their predicted risk.</p>
<p><strong>Decision-making Threshold:</strong> The curve also assists in selecting an optimal decision threshold that balances sensitivity and specificity according to clinical requirements. For instance, in a clinical scenario where missing a diagnosis of sleep apnea could have severe consequences, a higher sensitivity (lower threshold) might be preferred, even at the cost of lower specificity.</p>
<p>In summary, the ROC curve and its AUC value provide robust evidence that the logistic regression model is effective and reliable for predicting sleep apnea, potentially aiding in early diagnosis and better management of this condition. Overall, the interpretation hinges on the AUC value from the ROC analysis and the significance and direction of the BMI coefficient in the logistic regression model. These metrics collectively provide insights into whether and to what extent BMI predicts the presence of sleep apnea.</p>
<p><u><strong>CONCLUSION</strong></u></p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The logistic regression analysis provided strong evidence that BMI is a significant predictor of sleep apnea. The model’s AUC of 0.82 indicates good diagnostic accuracy, suggesting that BMI, along with other predictors such as age and blood pressure, effectively discriminates between individuals with and without sleep apnea. This finding aligns with existing medical understanding that links higher body weight to increased risks of sleep-related breathing disorders.</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; From the analysis conducted using logistic regression, it is evident that BMI significantly predicts the presence of sleep apnea. The statistical model, particularly demonstrated through the ROC curve with an AUC of 0.82, indicates that higher BMI is a strong predictor of sleep apnea. This finding aligns with existing medical understanding that links higher body weight to increased risks of sleep-related breathing disorders.</p>
<p><u><strong>IMPLICATIONS</strong></u></p>
<p><strong>Clinical Use:</strong> The model can be particularly useful in clinical settings for preliminary screening. Individuals identified as high-risk based on their BMI and other factors can be prioritized for diagnostic sleep studies, which are more resource-intensive and invasive.</p>
<p><strong>Public Health:</strong> This finding reinforces the importance of weight management programs as part of public health strategies to prevent sleep apnea, particularly given the increasing prevalence of obesity worldwide.</p>
<p><strong>Policy Making:</strong> Health policymakers can use these insights to allocate resources more effectively, such as targeting areas with high obesity rates for sleep apnea screening programs and preventive health initiatives.</p>
<p><u><strong>FUTURE QUESTIONS AND FURTHER ANALYSIS</strong></u></p>
<p><strong>Longitudinal Studies:</strong> Future research could employ longitudinal data to examine how changes in BMI over time affect the risk of developing sleep apnea. This would help in understanding the causal relationship between BMI and sleep apnea.</p>
<p><strong>Subgroup Analysis</strong>: It would be valuable to conduct analyses stratified by age, gender, or ethnicity to see if the predictive power of BMI varies across different demographic groups.</p>
<p><strong>Additional Predictors:</strong> Including additional lifestyle factors such as diet, exercise, smoking status, or alcohol consumption might improve the model’s accuracy and provide a more comprehensive view of the risk factors for sleep apnea.</p>
<p><strong>Machine Learning Approaches:</strong> Exploring other machine learning models like Random Forests or Neural Networks could potentially uncover non-linear relationships and interactions between predictors not captured by logistic regression.</p>
<p><strong>Economic Evaluation:</strong> Assessing the cost-effectiveness of using this predictive model in regular health screenings could support its implementation in routine clinical practice.</p>
<p><u><strong>REFERENCES</strong></u></p>
<p><strong>[1] Data.gov home. (n.d.). Data.gov. <a href="https://data.gov/" class="uri">https://data.gov/</a></strong></p>
<p><strong>[2] Data.gov Home - data.gov. (n.d.). <a href="https://catalog.data.gov/dataset/?res_format=CSV" class="uri">https://catalog.data.gov/dataset/?res_format=CSV</a></strong></p>
<p><strong>[3] Data.gov Home - data.gov. (n.d.-b). <a href="https://catalog.data.gov/dataset/?vocab_category_all=Human+Health" class="uri">https://catalog.data.gov/dataset/?vocab_category_all=Human+Health</a></strong></p>


</section>
</main></div>
</div>
 <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>